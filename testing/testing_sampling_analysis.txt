Flavie Qin 2230509
Programming Techniques and Applications
R. Vincent, instructor
Final Project

## My analysis (see data below)

When evaluating the strength of a certain hand (for the computer bot), 
the idea is that the hand strength = probability that this hand will win
Thus, the bot will be able to evaluate the hand strength of its cards every time a new card is put on the table (= every round)

However, imagine the case where we are at the round after the turn: 
Then, the river is missing + the opponent's 2 pocket cards are unknown
Imagine evaluating every single combinations for this situation ("true" hand strength):
6 known cards so 52-6 = 46 cards possible for the unknowns
The order for the unknown 3 cards matters 
(at least the order determines if the cards are in the community pile or in opponents pocket cards)
Therefore we calculate the number of permutations:
Number of permutations = 46*45*44 = 91080
So if we want to evaluate the true hand strength, it will take 91080 iterations (much too slow, I tried!)
And even this is just missing 3 unknowns, imagine at the very beginning at preflop, 
here would be 7 cards unknown (all community cards + opponent pocket cards)

So I must do an alternative: my idea was to do random sampling of a set amount of iterations (ex: 1000)
and hope that this random sampling would mean it will representative of the true probability

To test this out (thank you to Prof. Veronique Godin for helping me come up with this idea!):
I decided to take the most restricted case: all cards on table are know, only opponent pocket cards are unknown
Then, there would be a total of 52 - 7 = 45 possible cards
Number of permutations = 45*44 = 1980
But here, the order doesn't matter! So half of these will be repeats
So in reality total of 990 combinations! This is doable to evaluate "true" hand strength

Then, I will try out the random sampling method for this same situation, 
and i will be able to compare the sampling hand strength with a true ground strength!
Obviously, I expect this to be fairly accurate since we are doing 1000 iterations (basically the number of total combinations)
But its still doing random sampling so this allows to check that it works well 
Results are below.

Using 1000 iterations (about the number of total combinaitons): 
the result is very good, the percent difference compared to true hand strength always < 5%
Especially when i do the average of many samplings, it gives a hand strength thats really close to true

I tried doing only 100 iterations because that ratio of iterations/actual number of combinations
is probably closer to reality for most other situations (where sampling population << true number of permutations)
and the seperate sampling hand strenghts were okay (but not great, sometimes up to 20-30% error) 
compared to how close they are to truth = higher variance
But, if i take the average (here, was over 10 runs), it seems to average out the over or under estimations
and it yields a good estimation!

Technically, doing the sampling 10 times with 100 combinations should be the same computation cost as one time 1000 combinations
From the results, it appears it doesnt really matter, seems to be pretty much equal
maybe 1000 iterations is slightly better, but its also random so depends on what combinations it gets

Its also generally worse at predicting when its low hand strength, but thats alright because if its low in general 
it will just get discarded

In conclusion, I think this method (random sampling) should be a viable method 
and a good enough estimator for true hand strength! 
and either way (many samples and average or just a larger sample) could be good 

-------------------------------------------------------------------

## testing results

Round 1: 

hand1 = [14Spade, 13Heart]
community pile = [8Diamond, 9Heart, 7Spade, 12Diamond, 14Heart]
Finding hand strength of hand1 (probability it wins)

Doing all combinations:
Number of operations = 990
True hand strength = 0.8595959595959596
Time = 0.03247670002747327 s

Sampling random combinations 1 times:
Number of iterations = 1000
Average sampling probability = 0.837
Percent error over 1 samples = 2.63%
Time = 0.04708120005670935 s

Sampling random combinations 10 times:
Number of iterations = 100
Average sampling probability = 0.8489999999999999
Percent error over 10 samples = 1.23%
Time = 0.04448839998804033 s

Round 2:

hand1 = [8Club, 2Spade]
community pile = [8Heart, 7Club, 9Spade, 10Spade, 7Spade]
Finding hand strength of hand1 (probability it wins)

Doing all combinations:
Number of operations = 990
True hand strength = 0.3484848484848485
Time = 0.03377080010250211 s

Sampling random combinations 1 times:
Number of iterations = 1000
Average sampling probability = 0.343
Percent error over 1 samples = 1.57%
Time = 0.043868100037798285 s

Sampling random combinations 10 times:
Number of iterations = 100
Average sampling probability = 0.358
Percent error over 10 samples = 2.73%
Time = 0.04776550002861768 s


Round 3:

hand1 = [14Spade, 12Heart]
community pile = [11Club, 6Club, 9Diamond, 14Diamond, 3Club]
Finding hand strength of hand1 (probability it wins)

Doing all combinations:
Number of operations = 990
True hand strength = 0.8565656565656565
Time = 0.0337805999442935 s

Sampling random combinations 1 times:
Number of iterations = 1000
Average sampling probability = 0.884
Percent error over 1 samples = 3.20%
Time = 0.04778339993208647 s

Sampling random combinations 10 times:
Number of iterations = 100
Average sampling probability = 0.859
Percent error over 10 samples = 0.28%
Time = 0.04962659999728203 s


Round 4:

hand1 = [4Diamond, 7Club]
community pile = [12Spade, 11Diamond, 6Club, 9Diamond, 10Diamond]
Finding hand strength of hand1 (probability it wins)

Doing all combinations:
Number of operations = 990
True hand strength = 0.12424242424242424
Time = 0.03404319996479899 s

Sampling random combinations 1 times:
Number of iterations = 1000
Average sampling probability = 0.119
Percent error over 1 samples = 4.22%
Time = 0.04945489997044206 s

Sampling random combinations 10 times:
Number of iterations = 100
Average sampling probability = 0.13799999999999998
Percent error over 10 samples = 11.07%
Time = 0.04686200001742691 s


Round 5:

hand1 = [14Heart, 9Spade]
community pile = [7Club, 13Spade, 11Spade, 8Spade, 10Diamond]
Finding hand strength of hand1 (probability it wins)

Doing all combinations:
Number of operations = 990
True hand strength = 0.9404040404040404
Time = 0.03279830003157258 s

Sampling random combinations 1 times:
Number of iterations = 1000
Average sampling probability = 0.894
Percent error over 1 samples = 4.93%
Time = 0.04449130001012236 s

Sampling random combinations 10 times:
Number of iterations = 100
Average sampling probability = 0.8960000000000001
Percent error over 10 samples = 4.72%
Time = 0.04750549991149455 s


Round 6:

hand1 = [7Spade, 11Heart]
community pile = [14Spade, 7Heart, 5Club, 12Diamond, 11Club]
Finding hand strength of hand1 (probability it wins)

Doing all combinations:
Number of operations = 990
True hand strength = 0.9212121212121213
Time = 0.038141599972732365 s

Sampling random combinations 1 times:
Number of iterations = 1000
Average sampling probability = 0.924
Percent error over 1 samples = 0.30%
Time = 0.04465679998975247 s

Sampling random combinations 10 times:
Number of iterations = 100
Average sampling probability = 0.9019999999999999
Percent error over 10 samples = 2.09%
Time = 0.054805199964903295 s


Round 7:

hand1 = [10Diamond, 5Diamond]
community pile = [13Diamond, 12Club, 6Spade, 12Diamond, 4Spade]
Finding hand strength of hand1 (probability it wins)

Doing all combinations:
Number of operations = 990
True hand strength = 0.25555555555555554
Time = 0.041958099929615855 s

Sampling random combinations 1 times:
Number of iterations = 1000
Average sampling probability = 0.27
Percent error over 1 samples = 5.65%
Time = 0.045920100063085556 s

Sampling random combinations 10 times:
Number of iterations = 100
Average sampling probability = 0.25
Percent error over 10 samples = 2.17%
Time = 0.037429300020448864 s

--------------------------------------------------------------------


hand1 = [7Club, 11Spade]
community pile = [8Heart, 14Spade, 11Diamond, 9Spade, 9Diamond]
Finding hand strength of hand1 (probability it wins)

Sampling random combinations 1 times:
Number of iterations = 1000
Average sampling probability = 0.737
Time = 0.1074123999569565 s

Sampling random combinations 10 times:
Number of iterations = 100
Average sampling probability = 0.719
Time = 0.09897369996178895 s

hand1 = [8Club, 6Club]
community pile = [10Heart, 6Spade, 8Spade, 3Diamond]
Finding hand strength of hand1 (probability it wins)

Sampling random combinations 1 times:
Number of iterations = 100
Average sampling probability = 0.69
Time = 0.04794660001061857 s

----------------

## 2 unknowns

hand1 = [13Diamond, 5Diamond]
community pile = [12Heart, 12Diamond, 11Diamond, 8Spade, 13Heart]
Finding hand strength of hand1 (probability it wins)

Doing all combinations:
Number of operations = 990
True hand strength = 0.8585858585858586
Time = 0.024848299915902317 s

Sampling random combinations 1 times:
Number of iterations = 1000
Average sampling probability = 0.858
Percent error over 1 samples = 0.07%
Time = 0.03428859997075051 s

Sampling random combinations 10 times:
Number of iterations = 100
Average sampling probability = 0.852
Percent error over 10 samples = 0.77%
Time = 0.03156889998354018 s


## 3 unknowns 

hand1 = [4Heart, 11Club]
community pile = [10Heart, 12Club, 8Heart, 10Club]
Finding hand strength of hand1 (probability it wins)

Doing all combinations:
Number of operations = 45540
True hand strength = 0.41563460693895476
Time = 1.1212093000067398 s

Sampling random combinations 10 times:
Number of iterations = 1000
Average sampling probability = 0.4231
Percent error over 10 samples = 1.80%
Time = 0.3392976999748498 s


------------------------------------------

hand1 = [3Spade, 5Club]
community pile = [11Club, 12Spade, 14Spade, 2Spade, 3Diamond]
Finding hand strength of hand1 (probability it wins)

Doing all combinations:
Number of operations = 990
True hand strength = 0.5181818181818182
Time = 0.024108300101943314 s

Sampling random combinations 1 times:
Number of iterations = 1000
Average sampling probability = 0.511
Percent error over 1 samples = 1.39%
Time = 0.032209299970418215 s

Sampling random combinations 10 times:
Number of iterations = 100
Average sampling probability = 0.54
Percent error over 10 samples = 4.21%
Time = 0.031317500048317015 s

hand1 = [5Spade, 7Club]
community pile = [9Heart, 13Heart, 13Spade, 4Diamond]
Finding hand strength of hand1 (probability it wins)

Doing all combinations:
Number of operations = 45540
True hand strength = 0.19683794466403162
Time = 1.0822498999768868 s

Sampling random combinations 10 times:
Number of iterations = 1000
Average sampling probability = 0.2008
Percent error over 10 samples = 2.01%
Time = 0.407950000022538 s

----------------------

hand1 = [11Heart, 8Club]
community pile = [3Spade, 3Club, 10Diamond, 4Diamond, 10Club]
Finding hand strength of hand1 (probability it wins)

Doing all combinations:
Number of operations = 990
True hand strength = 0.29797979797979796
Time = 0.025626400019973516 s

Sampling random combinations 1 times:
Number of iterations = 1000
Average sampling probability = 0.3
Percent error over 1 samples = 0.68%
Time = 0.03239519998896867 s

Sampling random combinations 10 times:
Number of iterations = 100
Average sampling probability = 0.308
Percent error over 10 samples = 3.36%
Time = 0.033116000005975366 s

hand1 = [2Diamond, 14Heart]
community pile = [3Diamond, 10Diamond, 4Heart, 6Spade]
Finding hand strength of hand1 (probability it wins)

Doing all combinations:
Number of operations = 45540
True hand strength = 0.41490996925779533
Time = 1.168684000032954 s

Sampling random combinations 10 times:
Number of iterations = 1000
Average sampling probability = 0.4042
Percent error over 10 samples = 2.58%
Time = 0.3443364000413567 s

